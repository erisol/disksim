clear all; clc; 
global dumpit;
global global_info; % user data 
global_info.STOP_AT = 960;
%global_info.PRINT_LOOP_NUMBER = 1; 
%global_info.MAX_LOOP = 1;
dumpit = 0;

pns = pnstruct('tasta_pn_pdf'); % create petri net structure

dyn.m0 = {'pStorageAtTasta',global_info.place_tasta_daily_mass,...
          'pTransportVehicles',global_info.road_tasta_hinna_capacity,...
          'pEnroute',10,...
          'pDumpAtJaatta',1,...
          'pVehiclesEnrouteBack',1
          };
dyn.ft = {'tMassGenerator',global_info.truck_capacity,...
          'tNewVehiclesAvailable',global_info.truck_per_place,...
          'tStartTransport',3,...
          'tDumpMass',13,...
          'tNewVehicleAvailable',1}; 
      
%dyn.ip = {'tStartTransport',5};

prnsys(pns, dyn);
pni = initialdynamics(pns, dyn);

sim = gpensim(pni); % perform simulation runs

prnss(sim); % print the simulation results 
plotp(sim, {...
'pStorageAtTasta',...
'pEnroute',...
'pStorageAtJaattaa',...
'pVehiclesEnrouteBack',...
'pTransportVehicles',...
'pDumpAtJaatta'}); % plot the results

fprintf('amount dumped today: %s\n', num2str(global_info.dumped_at_jaattaa));
